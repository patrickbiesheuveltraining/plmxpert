--GET TEILLIST FOR PART
DECLARE @PartID as int = 6200
-- 5810, 18924, 6200, 20561

select PARENT.NFT_IDNR -- PARENT PART
	, PARENT.NFT_STL0
	, TL.TL_SIDNR -- CHILD PART
	, CHILD.NFT_STL0
	, (select count(TL2.TL_SIDNR) 
		from TEILLIST AS TL2
		where TL2.TL_SIDNR = TL.TL_SIDNR) AS [count]
from NFSTAMM as PARENT
	join TEILLIST as TL
	on TL.TL_VIDNR = PARENT.NFT_IDNR
		join NFSTAMM as CHILD
		on TL.TL_SIDNR = CHILD.NFT_IDNR
where PARENT.NFT_IDNR = @PartID

